### 布隆过滤器

布隆过滤器本质是很长的二进制向量和hash算法

### 数据操作

##### 添加数据

首先定义一个二进制数组，默认全为0，通过第一个hash函数计算出要添加的数据的值（X），将二进制数据中第X个的值设置为1，然后计算第二个, 得到的值为Y，将二进制数组中第Y个的值设置为1……

##### 判断数据是否存在

通过多个hash算法将对象散列到二进制向量中，如果全为1，则可能存在，如果有0，则一定不存在。

### 本质原因：

1. Hash函数本身的冲突
2. 二进制向量长度限制

### 应用:

1. 大数据量判断是否存在
2. 网页爬虫对URL去重
3. 反垃圾邮件
4. Chrome 使用BloomFilter过滤恶意URL
5. Redis 防止缓存穿透：通过Bitmap实现BloomFilter。（Redission）

### 缺点：

 **删除困难:** 

假设A散列后的结果是01011001，B散列后结果是0101001，如果把B删除，不能直接简单的将B散列后为1的地方全部改为0，因为有可能其他对象散列后的位置和B有重合，如果全部改为0，会导致其他对象也找不到。

**存在误判：**

原因是可能A对象经过hash函数散列到相同的位置（假设 0 1 0 1 1 0 0 1 1 ），而B对象经过散列也散列到（0 1 0 1 1 0 0 1 1），但是B对象并不在系统中存在，但返回的结果却是存在，因此存在误判概率。

实际使用:

Google的Guava：

```java
BloomFilter<CharSequence> bf =    BloomFilter.create(Funnels.stringFunnel(Charsets.UTF_8), expectedInsertions); // 其中expectedInsertions 是估计的要插入的数据量大小

```







